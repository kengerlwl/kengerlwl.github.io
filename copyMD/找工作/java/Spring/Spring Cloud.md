---
title: Spring Cloud.md
top: false
cover: false
toc: true
mathjax: true
hidden: true
date: 2024-04-06 15:27:31
password:
summary:
tags:
- spring
- java
categories:
- find JOB

---



## 为什么需要微服务

### 传统的Web项目

传统的WEB应用核心分为业务逻辑、适配器以及API或通过UI访问的WEB界面。业务逻辑定义业务流程、业务规则以及领域实体。适配器包括数据库访问组件、消息组件以及访问接口等。

尽管也是遵循模块化开发，但最终它们会打包并部署为单体式应用。例如Java应用程序会被打包成WAR，部署在Tomcat或者Jetty上。

这种单体应用比较适合于小项目，优点是：

- 开发简单直接，集中式管理
- 基本不会重复开发
- 功能都在本地，没有分布式的管理开销和调用开销

它的缺点也十分明显，特别对于互联网公司来说：

- **开发效率低：所有的开发在一个项目改代码，递交代码相互等待，代码冲突不断**
- 代码维护难：代码功能耦合在一起，新人不知道何从下手
- 部署不灵活：构建时间长，任何小修改必须重新构建整个项目，这个过程往往很长
- **稳定性不高：一个微不足道的小问题，可以导致整个应用挂掉**
- **扩展性不够：无法满足高并发情况下的业务需求**

### 微服务项目

**微服务架构的优点**

- 解决了复杂性问题

它将单体应用分解为一组服务。虽然功能总量不变，但应用程序已被分解为可管理的模块或服务。这些服务定义了明确的RPC或消息驱动的API边界。微服务架构强化了应用模块化的水平，而这通过单体代码库很难实现。因此，微服务开发的速度要快很多，更容易理解和维护。

- 单独开发每个服务，与其他服务互不干扰

只要符合服务API契约，开发人员可以自由选择开发技术。这就意味着开发人员可以采用新技术编写或重构服务，由于服务相对较小，所以这并不会对整体应用造成太大影响。

- 可以独立部署每个微服务

开发人员无需协调对服务升级或更改的部署。这些更改可以在测试通过后立即部署。所以微服务架构也使得CI／CD成为可能。

## 实现微服务要解决的四个问题？

> 1. 客户端如何访问这些服务？
>    1. 微服务网关API Gateway
>       - 提供统一服务入口，让微服务对前台透明
>       - 聚合后台的服务，节省流量，提升性能
>       - 提供安全，过滤，流控等API管理功能
> 2. 服务之间如何通信？
>    1. Open Feign， Nacos
> 3. 这么多服务，怎么找?
>    1. Nacos
> 4. 服务挂了怎么办？
>    1. 重试机制
>    2. 限流
>    3. 熔断机制
>    4. 负载均衡
>    5. 降级（本地缓存）

## Spring Cloud有哪些组件?

> - 服务发现--Netflix Eureka， 或Nacos
> - 客户端负载均衡--Netflix Ribbon
> - 断路器（服务熔断）--Netflix Hystrix
> - 服务网关--Netflix Zuul， Spring Cloud Gateway
> - 分布式配置--Spring Cloud Config

