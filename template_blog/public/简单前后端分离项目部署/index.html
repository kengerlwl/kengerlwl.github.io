<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>简单前后端分离项目部署 - Kenger`s Blog</title><meta name="Description" content="Hugo theme - LoveIt"><meta property="og:url" content="https://blog.kenger.work/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/">
  <meta property="og:site_name" content="Kenger`s Blog">
  <meta property="og:title" content="简单前后端分离项目部署">
  <meta property="og:description" content="简单前后端分离项目部署 简介 我是部署我的简单动漫网站的时候碰到这方面的问题。 我的项目技术栈： 使用python flask 作为后端 使用vue编写前端 文件传">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-01-15T15:27:31+00:00">
    <meta property="article:modified_time" content="2020-01-15T15:27:31+00:00">
    <meta property="article:tag" content="服务器">
    <meta property="article:tag" content="运维">
    <meta property="og:image" content="https://blog.kenger.work/logo.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blog.kenger.work/logo.png"><meta name="twitter:title" content="简单前后端分离项目部署">
<meta name="twitter:description" content="简单前后端分离项目部署 简介 我是部署我的简单动漫网站的时候碰到这方面的问题。 我的项目技术栈： 使用python flask 作为后端 使用vue编写前端 文件传">
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://blog.kenger.work/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" /><link rel="prev" href="https://blog.kenger.work/%E8%A7%A3%E5%86%B3openwrt-%E6%80%BB%E6%98%AFdns%E6%8C%87%E5%90%91127.0.0.1/" /><link rel="next" href="https://blog.kenger.work/%E7%9B%91%E7%9D%A3%E6%97%A0%E7%9B%91%E7%9D%A3%E5%8D%8A%E7%9B%91%E7%9D%A3%E7%AD%89%E5%AD%A6%E4%B9%A0%E6%96%B9%E5%BC%8F/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "简单前后端分离项目部署",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/blog.kenger.work\/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/blog.kenger.work\/images\/4.jpg",
                            "width":  1280 ,
                            "height":  720 
                        }],"genre": "posts","keywords": "服务器, 运维","wordcount":  1756 ,
        "url": "https:\/\/blog.kenger.work\/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2\/","datePublished": "2020-01-15T15:27:31+00:00","dateModified": "2020-01-15T15:27:31+00:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "kenger","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/blog.kenger.work\/images\/avatar.png",
                    "width":  1080 ,
                    "height":  1080 
                }},"author": {
                "@type": "Person",
                "name": "kenger"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Kenger`s Blog"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>Kenger`s Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/kengerlwl/kengerlwl.github.io" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="选择语言">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" selected>简体中文</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Kenger`s Blog"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>Kenger`s Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/kengerlwl/kengerlwl.github.io" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="选择语言">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" selected>简体中文</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">简单前后端分离项目部署</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://blog.kenger.work/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>kenger</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E7%BB%BC%E5%90%88/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>综合</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2020-01-15">2020-01-15</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;约 1756 字&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;预计阅读 4 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#简介">简介</a></li>
    <li><a href="#文件传输到服务器上">文件传输到服务器上</a></li>
    <li><a href="#将后端跑起来">将后端跑起来</a></li>
    <li><a href="#前端部署">前端部署</a>
      <ul>
        <li><a href="#nginx下vue等打包静态资源的路由问题">Nginx下vue等打包静态资源的路由问题</a></li>
      </ul>
    </li>
    <li><a href="#最后讲解自动启动问题">最后讲解自动启动问题</a>
      <ul>
        <li><a href="#简单讲程序放入后台">简单讲程序放入后台</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="简单前后端分离项目部署">简单前后端分离项目部署</h1>
<h2 id="简介">简介</h2>
<p>我是部署我的简单动漫网站的时候碰到这方面的问题。
我的项目技术栈：</p>
<ul>
<li>使用python flask 作为后端</li>
<li>使用vue编写前端</li>
</ul>
<h2 id="文件传输到服务器上">文件传输到服务器上</h2>
<p>方法有很多，我直接将项目上传到github， 然后pull到云端。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/837f2db56b54c5bbbed63b60b73ff264.png"
        data-srcset="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/837f2db56b54c5bbbed63b60b73ff264.png, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/837f2db56b54c5bbbed63b60b73ff264.png 1.5x, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/837f2db56b54c5bbbed63b60b73ff264.png 2x"
        data-sizes="auto"
        alt="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/837f2db56b54c5bbbed63b60b73ff264.png"
        title="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/837f2db56b54c5bbbed63b60b73ff264.png" /></p>
<h2 id="将后端跑起来">将后端跑起来</h2>
<p>我这里直接使用python命令行启动</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">python /root/lwl/code/python/deploy/flaskApi.py &amp;  # 运行指定项目
</span></span></code></pre></td></tr></table>
</div>
</div><p>虽然后端运行了起来，但是这时候我们还不能通过公网ip去进行访问。
要将防火墙打开。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">firewall-cmd --zone=public --add-port=5000/tcp    &amp;  #开启防火墙端口
</span></span></code></pre></td></tr></table>
</div>
</div><p>同时腾讯这也要进行防火墙管理</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/5d1b0b0c26df6d3c72eae6d41609a231.png"
        data-srcset="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/5d1b0b0c26df6d3c72eae6d41609a231.png, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/5d1b0b0c26df6d3c72eae6d41609a231.png 1.5x, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/5d1b0b0c26df6d3c72eae6d41609a231.png 2x"
        data-sizes="auto"
        alt="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/5d1b0b0c26df6d3c72eae6d41609a231.png"
        title="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/5d1b0b0c26df6d3c72eae6d41609a231.png" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c698b3e2fc66f323e24026c743470803.png"
        data-srcset="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c698b3e2fc66f323e24026c743470803.png, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c698b3e2fc66f323e24026c743470803.png 1.5x, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c698b3e2fc66f323e24026c743470803.png 2x"
        data-sizes="auto"
        alt="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c698b3e2fc66f323e24026c743470803.png"
        title="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c698b3e2fc66f323e24026c743470803.png" /></p>
<p>然后就可以访问到了
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/6ad55e8ba23f5b050167a37488cca457.png"
        data-srcset="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/6ad55e8ba23f5b050167a37488cca457.png, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/6ad55e8ba23f5b050167a37488cca457.png 1.5x, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/6ad55e8ba23f5b050167a37488cca457.png 2x"
        data-sizes="auto"
        alt="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/6ad55e8ba23f5b050167a37488cca457.png"
        title="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/6ad55e8ba23f5b050167a37488cca457.png" /></p>
<h2 id="前端部署">前端部署</h2>
<p>我这里的前端， 属于传统前端，主要有html，css，js等静态文件组成。</p>
<p>我使用VUE，所以使用npm run build 进行打包
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/0084e397e08735dda4e5ab322dc7dd23.png"
        data-srcset="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/0084e397e08735dda4e5ab322dc7dd23.png, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/0084e397e08735dda4e5ab322dc7dd23.png 1.5x, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/0084e397e08735dda4e5ab322dc7dd23.png 2x"
        data-sizes="auto"
        alt="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/0084e397e08735dda4e5ab322dc7dd23.png"
        title="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/0084e397e08735dda4e5ab322dc7dd23.png" />
这时候，我们的前端就已经打包完毕了。</p>
<p>重点来了
<strong>使用某个服务器对静态资源进行代理</strong>
我使用的是nginx。
以下是我的配置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">user</span>  <span class="n">root</span><span class="p">;</span>  <span class="c1"># 用户</span>
</span></span><span class="line"><span class="cl"><span class="n">worker_processes</span> <span class="n">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">error_log</span>  <span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">wwwlogs</span><span class="o">/</span><span class="n">nginx_error</span><span class="o">.</span><span class="n">log</span>  <span class="n">crit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">pid</span>        <span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">logs</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">pid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">worker_rlimit_nofile</span> <span class="mi">51200</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">events</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">use</span> <span class="n">epoll</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">worker_connections</span> <span class="mi">51200</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">multi_accept</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">http</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">include</span>       <span class="n">mime</span><span class="o">.</span><span class="n">types</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="c1">#include luawaf.conf;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="n">include</span> <span class="n">proxy</span><span class="o">.</span><span class="n">conf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">default_type</span>  <span class="n">application</span><span class="o">/</span><span class="n">octet</span><span class="o">-</span><span class="n">stream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">server_names_hash_bucket_size</span> <span class="mi">512</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">client_header_buffer_size</span> <span class="mi">32</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">large_client_header_buffers</span> <span class="mi">4</span> <span class="mi">32</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">client_max_body_size</span> <span class="mi">50</span><span class="n">m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">sendfile</span>   <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">tcp_nopush</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">keepalive_timeout</span> <span class="mi">60</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">tcp_nodelay</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">fastcgi_connect_timeout</span> <span class="mi">300</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">fastcgi_send_timeout</span> <span class="mi">300</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">fastcgi_read_timeout</span> <span class="mi">300</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">fastcgi_buffer_size</span> <span class="mi">64</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">fastcgi_buffers</span> <span class="mi">4</span> <span class="mi">64</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">fastcgi_busy_buffers_size</span> <span class="mi">128</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">fastcgi_temp_file_write_size</span> <span class="mi">256</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">fastcgi_intercept_errors</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">gzip</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">gzip_min_length</span>  <span class="mi">1</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">gzip_buffers</span>     <span class="mi">4</span> <span class="mi">16</span><span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">gzip_http_version</span> <span class="mf">1.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">gzip_comp_level</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">gzip_types</span>     <span class="n">text</span><span class="o">/</span><span class="n">plain</span> <span class="n">application</span><span class="o">/</span><span class="n">javascript</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">javascript</span> <span class="n">text</span><span class="o">/</span><span class="n">javascript</span> <span class="n">text</span><span class="o">/</span><span class="n">css</span> <span class="n">application</span><span class="o">/</span><span class="n">xml</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">gzip_vary</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">gzip_proxied</span>   <span class="n">expired</span> <span class="n">no</span><span class="o">-</span><span class="n">cache</span> <span class="n">no</span><span class="o">-</span><span class="n">store</span> <span class="n">private</span> <span class="n">auth</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">gzip_disable</span>   <span class="s2">&#34;MSIE [1-6]\.&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">limit_conn_zone</span> <span class="o">$</span><span class="n">binary_remote_addr</span> <span class="n">zone</span><span class="o">=</span><span class="n">perip</span><span class="p">:</span><span class="mi">10</span><span class="n">m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">limit_conn_zone</span> <span class="o">$</span><span class="n">server_name</span> <span class="n">zone</span><span class="o">=</span><span class="n">perserver</span><span class="p">:</span><span class="mi">10</span><span class="n">m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">server_tokens</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 访问日志配置在这</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#自定义名为main得日志格式</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">log_format</span>  <span class="n">main</span>  <span class="s1">&#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; &#39;</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;$status $body_bytes_sent &#34;$http_referer&#34; &#39;</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;&#34;$http_user_agent&#34; &#34;$http_x_forwarded_for&#34;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">access_log</span> <span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">wwwlogs</span><span class="o">/</span><span class="n">access</span><span class="o">.</span><span class="n">log</span>    <span class="n">main</span><span class="p">;</span>  <span class="c1"># 这里是具体路径</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 这里是我们需要注意的东西，也是配置主要需要修改的东西</span>
</span></span><span class="line"><span class="cl">   <span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">   <span class="c1">#我们访问119.29.143.49：88</span>
</span></span><span class="line"><span class="cl">        <span class="n">listen</span>       <span class="mi">80</span><span class="p">;</span>               <span class="c1"># 端口</span>
</span></span><span class="line"><span class="cl">        <span class="n">server_name</span>  <span class="mf">119.29</span><span class="o">.</span><span class="mf">143.49</span><span class="p">;</span>    <span class="c1"># 服务器名， 要代理的服务器的名字</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">#存放静态资源的文件路径</span>
</span></span><span class="line"><span class="cl">         <span class="n">root</span>   <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">lwl</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">deploy</span><span class="o">/</span><span class="n">front</span><span class="o">/</span><span class="n">dist</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">#ngix的配置文件</span>
</span></span><span class="line"><span class="cl">        <span class="n">include</span> <span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">/*.</span><span class="n">conf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">error_page</span> <span class="mi">404</span> <span class="o">/</span><span class="mf">404.</span><span class="n">html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">location</span> <span class="o">=</span> <span class="o">/</span><span class="mi">40</span><span class="n">x</span><span class="o">.</span><span class="n">html</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">error_page</span> <span class="mi">500</span> <span class="mi">502</span> <span class="mi">503</span> <span class="mi">504</span> <span class="o">/</span><span class="mi">50</span><span class="n">x</span><span class="o">.</span><span class="n">html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">location</span> <span class="o">=</span> <span class="o">/</span><span class="mi">50</span><span class="n">x</span><span class="o">.</span><span class="n">html</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">include</span> <span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">panel</span><span class="o">/</span><span class="n">vhost</span><span class="o">/</span><span class="n">nginx</span><span class="o">/*.</span><span class="n">conf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>我这里只对简单的静态资源代理进行举例，关于后端的代理可以自行浏览nginx的用例</p>
<h3 id="nginx下vue等打包静态资源的路由问题">Nginx下vue等打包静态资源的路由问题</h3>
<p>因为vue打包后是单个html，url也是vue内部的。所以刷新页面会出现下面问题。
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c36cf98ccd6ea5cb96b469912c76c1de.png"
        data-srcset="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c36cf98ccd6ea5cb96b469912c76c1de.png, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c36cf98ccd6ea5cb96b469912c76c1de.png 1.5x, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c36cf98ccd6ea5cb96b469912c76c1de.png 2x"
        data-sizes="auto"
        alt="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c36cf98ccd6ea5cb96b469912c76c1de.png"
        title="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/c36cf98ccd6ea5cb96b469912c76c1de.png" /></p>
<p>参考资料<a href="https://learnku.com/articles/34440" target="_blank" rel="noopener noreffer ">链接</a></p>
<p>解决问题
在服务端nginx配置里添加vue-route的跳转设置（这里首页是index.html，如果是index.php就在下面对应位置替换），正确配置如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">server
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">    listen 80;
</span></span><span class="line"><span class="cl">    server_name testwx.wangshibo.com;
</span></span><span class="line"><span class="cl">    index index.php index.html index.htm default.php default.htm default.html;
</span></span><span class="line"><span class="cl">    root /www/wwwroot/ssoShuang/dist;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    #vue-router配置
</span></span><span class="line"><span class="cl">    location / {
</span></span><span class="line"><span class="cl">        try_files $uri $uri/ @router;
</span></span><span class="line"><span class="cl">        index index.html;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    location @router {
</span></span><span class="line"><span class="cl">        rewrite ^.*$ /index.html last;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>重启 nginx 后，问题就迎刃而解了。</p>
<h2 id="最后讲解自动启动问题">最后讲解自动启动问题</h2>
<p>使用ssh 连接后，终端退出那么任务也就没了
所以我使用自动启动
这里主要用systemctl</p>
<p>我的服务器使用centos7，他的systemctl自动启动项在目录 <code>/usr/lib/systemd/system/</code>
新建service文件：
我新建了lwl.service文件</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/3344cb2cbd9040ada968c0055c3b321c.png"
        data-srcset="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/3344cb2cbd9040ada968c0055c3b321c.png, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/3344cb2cbd9040ada968c0055c3b321c.png 1.5x, https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/3344cb2cbd9040ada968c0055c3b321c.png 2x"
        data-sizes="auto"
        alt="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/3344cb2cbd9040ada968c0055c3b321c.png"
        title="https://raw.githubusercontent.com/kengerlwl/kengerlwl.github.io/master/image/094dfb8d4ef2f50f210c7d07055e80cd/3344cb2cbd9040ada968c0055c3b321c.png" /></p>
<p>具体配置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="p">[</span><span class="n">Unit</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">Description</span><span class="o">=</span><span class="n">lwl</span>       <span class="c1">#描述</span>
</span></span><span class="line"><span class="cl"><span class="n">After</span><span class="o">=</span><span class="n">network</span><span class="o">.</span><span class="n">target</span>  <span class="c1">#前置启动的程序</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">Service</span><span class="p">]</span>            <span class="c1">#具体的命令了</span>
</span></span><span class="line"><span class="cl"><span class="n">Type</span><span class="o">=</span><span class="n">forking</span>
</span></span><span class="line"><span class="cl"><span class="n">ExecStart</span><span class="o">=/</span><span class="n">root</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">sh</span>   <span class="c1"># 开启该任务的命令</span>
</span></span><span class="line"><span class="cl"><span class="n">ExecReload</span><span class="o">=/</span><span class="n">root</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">sh</span>  <span class="c1">#重启</span>
</span></span><span class="line"><span class="cl"><span class="n">ExecStop</span><span class="o">=/</span><span class="n">root</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">sh</span>    <span class="c1">#关闭</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">Install</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl"><span class="n">WantedBy</span><span class="o">=</span><span class="n">multi</span><span class="o">-</span><span class="n">user</span><span class="o">.</span><span class="n">target</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>注意</strong>
<strong>systemctl执行脚本时需要知道脚本的解释器</strong>
解决方法：
在/root/init.sh脚本的开头加上<code>#!/bin/sh</code></p>
<p>最后的init.sh</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">firewall-cmd --zone<span class="o">=</span>public --add-port<span class="o">=</span>5000/tcp    <span class="p">&amp;</span>  <span class="c1">#开启防火墙端口</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">python /root/lwl/code/python/deploy/flaskApi.py <span class="p">&amp;</span>  <span class="c1"># 运行指定项目</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#用来查找某个端口的进程pid</span>
</span></span><span class="line"><span class="cl"><span class="c1">#netstat -nlp | grep 5000 | awk &#39;{print $7}&#39; | awk -F&#34;/&#34; &#39;{ print $1 }&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后就是一些命令了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#查看日志</span>
</span></span><span class="line"><span class="cl"><span class="o">$</span> <span class="n">sudo</span> <span class="n">journalctl</span> <span class="o">-</span><span class="n">f</span> <span class="o">-</span><span class="n">u</span> <span class="n">nginx</span><span class="o">.</span><span class="n">service</span>
</span></span><span class="line"><span class="cl"><span class="err">—</span> <span class="n">Logs</span> <span class="n">begin</span> <span class="n">at</span> <span class="err">四</span> <span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">25</span> <span class="mi">17</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">20</span> <span class="n">CST</span><span class="o">.</span> <span class="err">—</span>
</span></span><span class="line"><span class="cl"><span class="mi">6</span><span class="err">月</span> <span class="mi">25</span> <span class="mi">10</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">24</span> <span class="n">Leco</span><span class="o">.</span><span class="n">lan</span> <span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">Starting</span> <span class="n">nginx</span> <span class="err">–</span> <span class="n">high</span> <span class="n">performance</span> <span class="n">web</span> <span class="n">server</span><span class="err">…</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="err">启动一个服务：</span><span class="n">systemctl</span> <span class="n">start</span> <span class="n">nginx</span><span class="o">.</span><span class="n">service</span>
</span></span><span class="line"><span class="cl"><span class="err">关闭一个服务：</span><span class="n">systemctl</span> <span class="n">stop</span> <span class="n">postfix</span><span class="o">.</span><span class="n">service</span>
</span></span><span class="line"><span class="cl"><span class="err">重启一个服务：</span><span class="n">systemctl</span> <span class="n">restart</span> <span class="n">nginx</span><span class="o">.</span><span class="n">service</span>
</span></span><span class="line"><span class="cl"><span class="err">显示一个服务的状态：</span><span class="n">systemctl</span> <span class="n">status</span> <span class="n">postfix</span><span class="o">.</span><span class="n">service</span>
</span></span><span class="line"><span class="cl"><span class="err">在开机时启用一个服务：</span><span class="n">systemctl</span> <span class="n">enable</span> <span class="n">nginx</span><span class="o">.</span><span class="n">service</span>
</span></span><span class="line"><span class="cl"><span class="err">在开机时禁用一个服务：</span><span class="n">systemctl</span> <span class="n">disable</span> <span class="n">nginx</span><span class="o">.</span><span class="n">service</span>
</span></span><span class="line"><span class="cl"><span class="err">查看服务是否开机启动：</span><span class="n">systemctl</span> <span class="n">is</span><span class="o">-</span><span class="n">enabled</span> <span class="n">nginx</span><span class="o">.</span><span class="n">service</span>
</span></span><span class="line"><span class="cl"><span class="err">查看已启动的服务列表：</span><span class="n">systemctl</span> <span class="n">list</span><span class="o">-</span><span class="n">unit</span><span class="o">-</span><span class="n">files</span><span class="o">|</span><span class="n">grep</span> <span class="n">enabled</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">刚刚配置的服务需要让</span><span class="n">systemctl能识别</span><span class="err">，就必须刷新配置</span>
</span></span><span class="line"><span class="cl"><span class="o">$</span> <span class="n">systemctl</span> <span class="n">daemon</span><span class="o">-</span><span class="n">reload</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>尽量将运行命令写的精确</strong>
比如我的python有多个版本，那么尽量写成
<code>/usr/bin/python   /root/lwl/code/python/deploy/flaskApi.py &amp;  # 运行指定项目</code></p>
<h3 id="简单讲程序放入后台">简单讲程序放入后台</h3>
<p>nohup命令：
如果你正在运行一个进程，而且你觉得在退出帐户时该进程还不会结束，那么可以使用nohup命令。该命令可以在你退出帐户/关闭终端之后继续运行相应的进程。nohup就是不挂起的意思。</p>
<p>我们现在开始启动服务 python pyserver.py，并且希望在后台运行.我们就可以使用nohup，命令如下：</p>
<p><code>nohup python pyserver.py </code></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2020-01-15</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://blog.kenger.work/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" data-title="简单前后端分离项目部署" data-hashtags="服务器,运维"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://blog.kenger.work/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" data-hashtag="服务器"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://blog.kenger.work/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" data-title="简单前后端分离项目部署"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://blog.kenger.work/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" data-title="简单前后端分离项目部署"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://blog.kenger.work/%E7%AE%80%E5%8D%95%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" data-title="简单前后端分离项目部署"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器</a>,&nbsp;<a href="/tags/%E8%BF%90%E7%BB%B4/">运维</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/%E8%A7%A3%E5%86%B3openwrt-%E6%80%BB%E6%98%AFdns%E6%8C%87%E5%90%91127.0.0.1/" class="prev" rel="prev" title="解决openwrt 总是dns指向127.0.0.1"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>解决openwrt 总是dns指向127.0.0.1</a>
            <a href="/%E7%9B%91%E7%9D%A3%E6%97%A0%E7%9B%91%E7%9D%A3%E5%8D%8A%E7%9B%91%E7%9D%A3%E7%AD%89%E5%AD%A6%E4%B9%A0%E6%96%B9%E5%BC%8F/" class="next" rel="next" title="监督，无监督，半监督等学习方式">监督，无监督，半监督等学习方式<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="giscus" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app">Giscus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.125.3">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://blog.kenger.work/" target="_blank">kenger</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":50},"comment":{"giscus":{"category":"Announcements","categoryId":"DIC_kwDOFA4dBM4Ce_0B","darkTheme":"github-dark","emitMetadata":"0","inputPosition":"bottom","lang":"zh-CN","lazyLoading":false,"lightTheme":"github-light","mapping":"pathname","reactionsEnabled":"1","repo":"kengerlwl/kengerlwl.github.io","repoId":"MDEwOlJlcG9zaXRvcnkzMzY0NjkyNTI="}},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.zh-cn","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
